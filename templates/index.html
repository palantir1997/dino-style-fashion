<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Style Recommend</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Hero Banner */
        .hero {
            background: url('https://source.unsplash.com/1600x400/?fashion,clothes') no-repeat center center;
            background-size: cover;
            color: black;
            text-shadow: none;
            padding: 100px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 40px;
        }
        .hero h1 { font-size: 3rem; font-weight: bold; }
        .hero p { font-size: 1.5rem; }

        /* 업로드 & 결과 영역 */
        .upload-box { border: none; padding: 20px; background-color: transparent; }
        .card { border: none; box-shadow: none; padding: 20px; height: 100%; background-color: transparent; }
        .upload-box:hover { border-color: #007bff; background-color: #f8f9fa; }
        .uploaded-img { width: 250px; height: 250px; object-fit: cover; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .result-img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.15); }
        .score-box { font-size: 0.9rem; color: #555; margin-top: 5px; }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <!-- Hero Banner -->
        <div class="hero">
            <h1>Style Recommender</h1>
            <p>DINO/CLIP 모델을 활용한 패션 이미지 유사도 추천 서비스</p>
        </div>

        <!-- 업로드 + 추천 영역 -->
        <div class="row g-4 align-items-stretch">
            <!-- 왼쪽: 업로드 -->
            <div class="col-lg-6">
                <div class="upload-box text-center">
                    <form action="/" method="post" enctype="multipart/form-data">
                        <h5 class="mb-3">이미지를 업로드하세요</h5>
                        <input class="form-control mb-3" type="file" name="file" required>
                        
                        <!-- 모델 선택 -->
                        <label>모델 선택:</label>
                        <select class="form-select mb-3" name="model">
                            <option value="dino" {% if model_selected=="dino" %}selected{% endif %}>DINO</option>
                            <option value="clip" {% if model_selected=="clip" %}selected{% endif %}>CLIP</option>
                        </select>

                        <button type="submit" class="btn btn-primary w-100">업로드</button>
                    </form>

                    {% if uploaded %}
                        <hr class="my-4">
                        <h5 class="mb-3">입력 이미지</h5>
                        <img src="{{ uploaded }}" class="uploaded-img">
                    {% endif %}

                    {% if description %}
                        <p class="mt-2 text-muted"><strong>CLIP 설명:</strong> {{ description }}</p>
                    {% endif %}
                </div>
            </div>

            <!-- 오른쪽: 추천 결과 -->
            <div class="col-lg-6">
                {% if uploaded %}
                    <div class="card p-4">
                        <h5 class="mb-4 fw-semibold text-center">추천 결과</h5>
                        <div class="row g-3 justify-content-center">
                            {% for r in results[:4] %}
                                <div class="col-6">
                                    <div class="text-center">
                                        <img src="{{ r.path }}" class="result-img">
                                        <div class="score-box">
                                            유사도: {{ r.score }}
                                            {% if r.description %}
                                                <br>설명: {{ r.description }}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% else %}
                    <div class="text-center text-muted mt-5">
                        <p>이미지를 업로드하면 오른쪽에 유사한 이미지들이 표시됩니다.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
